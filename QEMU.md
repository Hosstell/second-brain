---
tags:
---
-- **Установка**
```bash
sudo apt update
sudo apt install qemu-kvm libvirt-daemon-system libvirt-clients bridge-utils
```

-- **Запуск**
```bash
qemu-system-x86_64 -boot d -cdrom ubuntu-25.04-live-server-amd64.iso -m 4G -enable-kvm
```
**`qemu-system-x86_64`**: Это основная команда для запуска QEMU на системах с архитектурой x86_64.
**`-boot d`**: Эта опция указывает QEMU, с какого устройства следует загружаться. Значение `d` означает загрузку с CD-ROM. Это значит, что виртуальная машина будет пытаться загрузиться с указанного ISO-образа.
**`-cdrom ubuntu-25.04-live-server-amd64.iso`**: эта опция указывает путь к ISO-образу, который будет использоваться в качестве виртуального CD-ROM. В данном случае это образ Ubuntu Server версии 25.04. Виртуальная машина будет загружаться с этого образа.
**`-m 4G`**:  объем оперативной памяти (RAM)
**`-enable-kvm`**: эта опция включает поддержку KVM (Kernel-based Virtual Machine), что позволяет использовать аппаратную виртуализацию для улучшения производительности виртуальной машины. KVM использует возможности процессора для ускорения выполнения команд виртуальной машины.

**PS:** все созданные файл в системе будут сохранены до окончания сессии. Без указания виртуального диска, они будут хранится в ram. Для сохранения файлов между сессиями нужно создать виртуальный диск.

-- **Создание виртуального диска**
```bash
qemu-img create -f qcow2 my_virtual_disk.qcow2 20G
```


### Physical Volume, Volume Group, Logical Volume
1. **Physical Volume (PV):**
    - Это базовый строительный блок LVM, представляющий собой физическое устройство хранения (например, жесткий диск, SSD или раздел диска), которое инициализировано для использования с LVM.
    - PV предоставляет пространство, которое может быть использовано для создания Volume Groups (VG).
      
2. **Volume Group (VG):**
    - VG объединяет один или несколько PV в один пул пространства. Это позволяет использовать несколько физических устройств как единое целое.
    - VG предоставляет пространство, из которого можно создавать Logical Volumes (LV).
      
3. **Logical Volume (LV):**
    - LV создается из пространства, предоставленного VG. Это логические разделы, которые выглядят и работают как обычные разделы диска, но с большей гибкостью в управлении.
    - LV может быть легко изменен в размере, перемещен или удален без необходимости изменять физическую структуру дисков.
### Взаимосвязь компонентов:
- **PV → VG:** Один или несколько PV могут быть объединены в одну VG. Это позволяет агрегировать пространство с нескольких физических устройств.
- **VG → LV:** Из пространства, предоставленного VG, можно создавать несколько LV. Это позволяет гибко распределять пространство между различными логическими томами.
### Пример:
```bash
# Создание PV
sudo pvcreate /dev/sdX 
sudo pvcreate /dev/sdY

# Создание VG из нескольких PV
sudo vgcreate my_volume_group /dev/sdX /dev/sdY

# Создание LV из VG
sudo lvcreate -n my_logical_volume -L 20G my_volume_group
```
Таким образом, LVM предоставляет гибкую и мощную систему управления дисковым пространством, позволяя эффективно использовать ресурсы и легко изменять конфигурацию хранилищ в зависимости от потребностей.

**PS (ВАЖНО):**
- Прежде чем инициализировать физический том (PV) в LVM, устройство (например, диск или раздел) должно быть подготовлено на уровне операционной системы. 
- LVM лишь абстракция над инструментами, которые работают на уровне ос. К примеру, в моем случае использования QEMU и установки новой ос на виртуальн