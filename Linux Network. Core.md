##### **Список интерфейсов**
```bash
ip addr show

"""
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host noprefixroute 
       valid_lft forever preferred_lft forever
2: enp0s31f6: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc fq_codel state DOWN group default qlen 1000
    link/ether a0:29:19:0d:f0:7e brd ff:ff:ff:ff:ff:ff
3: wlp0s20f3: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 7c:70:db:31:fc:ef brd ff:ff:ff:ff:ff:ff
    inet 192.168.0.103/24 brd 192.168.0.255 scope global noprefixroute wlp0s20f3
       valid_lft forever preferred_lft forever
    inet6 fe80::f162:d70b:270c:1590/64 scope link noprefixroute 
       valid_lft forever preferred_lft forever

"""
```
##### **Список роутов**
```bash
ip route show

"""
default via 192.168.0.1 dev wlp0s20f3 proto dhcp src 192.168.0.103 metric 600 
10.0.3.0/24 dev lxcbr0 proto kernel scope link src 10.0.3.1 linkdown 
10.0.85.2 dev outline-tun0 scope link src 10.0.85.1 linkdown 
172.17.0.0/16 dev docker0 proto kernel scope link src 172.17.0.1 
172.18.0.0/16 dev br-c0750fac11ea proto kernel scope link src 172.18.0.1 linkdown 
192.168.0.0/24 dev wlp0s20f3 proto kernel scope link src 192.168.0.103 metric 600 
192.168.122.0/24 dev virbr0 proto kernel scope link src 192.168.122.1 linkdown 
"""
```
##### **Как читать интерфейсы?**

Конечно! Давайте добавим описание того, что будет, если не указаны необязательные параметры.

---

### Общий шаблон строки маршрутизации:
```bash
<destination> via <gateway> dev <interface> proto <protocol> src <source> metric <metric> <flags>
```

---

### Параметры и их значения:

#### 1. **`<destination>`**
- **Описание:** Указывает целевую сеть или IP-адрес, для которого предназначен маршрут.
- **Формат:**
  - `default`: Маршрут по умолчанию (используется, если нет более специфического маршрута).
  - `<IP-адрес>`: Конкретный IP-адрес (например, `192.168.1.1`).
  - `<CIDR>`: Сеть в формате CIDR (например, `192.168.1.0/24`).
- **Примеры:**
  - `default`
  - `192.168.1.0/24`
  - `10.0.0.1`
- **Если не указан:** Маршрут не будет создан, так как `<destination>` является обязательным параметром.

---

#### 2. **`via <gateway>`**
- **Описание:** Указывает шлюз (gateway), через который отправляется трафик для достижения целевой сети или IP-адреса. Шлюз — это устройство (например, маршрутизатор), которое находится в той же сети, что и ваше устройство, и через которое ваше устройство отправляет трафик, предназначенный для других сетей.
- **Формат:** IP-адрес шлюза.
- **Примеры:**
  - `via 192.168.1.1`
  - `via 10.0.0.254`
- **Если не указан:** Маршрут будет напрямую связан с указанным интерфейсом (`dev`). Это означает, что трафик будет отправлен через этот интерфейс без использования шлюза.

---

#### 3. **`dev <interface>`**
- **Описание:** Указывает имя сетевого интерфейса, через который отправляется трафик.
- **Формат:** Имя интерфейса (например, `eth0`, `wlan0`, `tun0`).
- **Примеры:**
  - `dev eth0`
  - `dev wlp0s20f3`
  - `dev tun0`
- **Если не указан:** Маршрут не будет создан, так как `dev` является обязательным параметром для указания интерфейса, через который отправляется трафик.

---

#### 4. **`proto <protocol>`**
- **Описание:** Указывает источник, откуда был получен маршрут.
- **Возможные значения:**
  - `kernel`: Маршрут был добавлен ядром (например, при подключении интерфейса).
  - `dhcp`: Маршрут был получен через DHCP.
  - `static`: Маршрут был добавлен вручную администратором.
  - `bgp`: Маршрут был получен через протокол BGP.
  - `bootp`: Маршрут был получен через BOOTP.
- **Примеры:**
  - `proto kernel`
  - `proto dhcp`
  - `proto static`
- **Если не указан:** Параметр `proto` не обязателен. Если он не указан, это не влияет на функциональность маршрута. Он просто не будет отображать информацию о источнике маршрута.

---

#### 5. **`src <source>`**
- **Описание:** Указывает IP-адрес источника (вашего устройства), с которого будет отправляться трафик для этого маршрута.
- **Формат:** IP-адрес.
- **Примеры:**
  - `src 192.168.1.103`
  - `src 10.0.0.2`
- **Если не указан:** Если параметр `src` не указан, ядро автоматически выберет исходный IP-адрес на основе интерфейса (`dev`), через который отправляется трафик. Это обычно не вызывает проблем, так как ядро использует подходящий IP-адрес для данного интерфейса.

---

#### 6. **`metric <metric>`**
- **Описание:** Указывает метрику маршрута. Метрика используется для приоритизации маршрутов: чем меньше значение, тем выше приоритет.
- **Формат:** Числовое значение.
- **Примеры:**
  - `metric 600`
  - `metric 100`
- **Если не указан:** Если метрика не указана, ядро назначает метрику по умолчанию. Обычно это значение зависит от типа маршрута и интерфейса. Например, маршруты, полученные через DHCP, могут иметь метрику по умолчанию, заданную DHCP-сервером.

---

#### 7. **`<flags>`**
- **Описание:** Дополнительные флаги, которые описывают состояние маршрута или интерфейса.
- **Возможные значения:**
  - `scope link`: Маршрут действует только в пределах локального сегмента сети.
  - `linkdown`: Интерфейс, через который отправляется трафик, в данный момент отключен.
  - `scope global`: Маршрут действует глобально (по умолчанию, если `scope` не указан).
- **Примеры:**
  - `scope link`
  - `linkdown`
  - `scope global` (по умолчанию, если не указан)
- **Если не указан:** Если флаг `scope` не указан, маршрут считается глобальным (`scope global`). Другие флаги, такие как `linkdown`, не влияют на функциональность маршрута, если они не указаны.

---

### Примеры строк маршрутизации:

1. **Маршрут по умолчанию:**
   ```
   default via 192.168.1.1 dev eth0 proto dhcp src 192.168.1.103 metric 600
   ```
   - Трафик, который не соответствует другим маршрутам, отправляется через шлюз `192.168.1.1` с использованием интерфейса `eth0`.
   - Маршрут был получен через DHCP.
   - Метрика маршрута — 600.
   - Маршрут глобальный (`scope global`), так как `scope` не указан.

2. **Маршрут для локальной сети:**
   ```
   192.168.1.0/24 dev eth0 proto kernel scope link src 192.168.1.103
   ```
   - Трафик, предназначенный для сети `192.168.1.0/24`, отправляется через интерфейс `eth0`.
   - Маршрут был добавлен ядром.
   - Маршрут действует только в пределах локального сегмента сети (`scope link`).

3. **Маршрут для конкретного IP-адреса:**
   ```
   10.0.0.1 dev tun0 proto static
   ```
   - Трафик, предназначенный для IP-адреса `10.0.0.1`, отправляется через интерфейс `tun0`.
   - Маршрут был добавлен вручную.
   - Маршрут глобальный (`scope global`), так как `scope` не указан.
   - Ядро автоматически выберет исходный IP-адрес для интерфейса `tun0`.

4. **Маршрут с отключенным интерфейсом:**
   ```
   192.168.122.0/24 dev virbr0 proto kernel scope link src 192.168.122.1 linkdown
   ```
   - Трафик, предназначенный для сети `192.168.122.0/24`, должен отправляться через интерфейс `virbr0`.
   - Интерфейс `virbr0` в данный момент отключен (`linkdown`).
   - Маршрут действует только в пределах локального сегмента сети (`scope link`).

---
### Итог:
- Строка маршрутизации содержит информацию о целевой сети или IP-адресе, шлюзе, интерфейсе, источнике маршрута, метрике и дополнительных флагах.
- Если необязательные параметры не указаны, ядро использует значения по умолчанию или автоматически выбирает подходящие значения.
- Параметры, такие как `proto`, `src`, `metric` и `flags`, предоставляют дополнительную информацию о маршруте, но не влияют напрямую на передачу трафика.

Если у вас есть еще вопросы, дайте знать! 😊