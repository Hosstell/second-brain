`iptables` — это **утилита управления фаерволом Linux**, которая позволяет:
- фильтровать пакеты,
- разрешать/блокировать трафик,
- настраивать NAT (SNAT, DNAT, MASQUERADE),
- вести stateful-фильтрацию (учитывать состояние соединения).
Она работает поверх **подсистемы netfilter** ядра Linux.
#### Основные таблицы iptables:
- `filter` - Основной фаервол (разрешить/запретить трафик)
- `nat` - NAT-преобразования (SNAT, DNAT, PAT)
- `mangle` - Изменение пакета (TTL, DSCP, маркировка)
- `raw` - До трекинга соединения (для исключений)
#### Основные цепочки (chains):
- `INPUT` - Пакеты, **приходящие в локальную машину**
- `OUTPUT` - Пакеты, **исходящие с локальной машины**
- `FORWARD` - Пакеты, **проходящие через машину (маршрутизатор)**
- `PREROUTING` - До маршрутизации — часто используется для DNAT
- `POSTROUTING` - После маршрутизации — часто используется для SNAT

### Пример: разрешить входящий SSH
```bash
iptables -A INPUT -p tcp --dport 22 -j ACCEPT
iptables -A INPUT -j DROP  # всё остальное — в мусор
```

### iptables и nftables
|`iptables`|`nftables`|
|---|---|
|Классика, всё ещё в ходу|Современный стандарт|
|Устаревает, но часто спрашивают|На новых системах — по умолчанию|
|Прост, но громоздкий|Структурирован, мощнее|
